"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1823],{51823:(t,e,i)=>{i.d(e,{Cg:()=>h,G9:()=>_,Lz:()=>w,OM:()=>f,Ol:()=>O,QP:()=>c,Zl:()=>M,b3:()=>k,bz:()=>u,createM3uPlaylist:()=>P,d7:()=>I,eu:()=>T,hN:()=>N,p3:()=>D,tracksFromPlaylist:()=>L,u7:()=>g,yK:()=>m});var r=i(36864),a=i(48060),o=i(37e3);let n=new Set(["Flexi - alien fish pond","Geiss - Spiral Artifact"]),s=`${a.yZ}/Music/Skins`,l=["localhost",a.sx.author.url.replace("https://","")].includes(window.location.hostname),p=t=>`
  query {
    skins(filter: APPROVED, first: 1, offset: ${t}) {
      nodes {
        download_url
      }
    }
  }
`,h={availableSkins:[{name:"Aqua X",url:`${s}/Aqua_X.wsz`},{name:"Nucleo NLog v2G",url:`${s}/Nucleo_NLog_v102.wsz`},...l?[{defaultName:"Random (Winamp Skin Museum)",loading:!1,get name(){if(this.loading)return this.defaultName;return this.loading=!0,fetch("https://api.webamp.org/graphql",{body:JSON.stringify({query:p(Math.floor(1e3*Math.random()))}),headers:{"Content-Type":"application/json"},method:"POST"}).then(async t=>{let{data:e}=await t.json()||{};this.skinUrl=e?.skins?.nodes?.[0]?.download_url,this.loading=!1}),this.defaultName},skinUrl:"",get url(){return this.skinUrl||`${s}/base-2.91.wsz`}}]:[],{name:"SpyAMP Professional Edition v5",url:`${s}/SpyAMP_Professional_Edition_v5.wsz`}]},d={height:116,width:275},u="#main-window",m="#playlist-window",c=(t,e="")=>t.skinIsLoaded().then(()=>{e&&(0,o.E)(e)}),w=t=>t.store.dispatch({type:"CLOSE_WINDOW",windowId:"equalizer"}),f=t=>t.store.dispatch({open:!1,type:"ENABLE_MILKDROP"}),g=(t,e)=>t.store.dispatch({data:e,type:"SET_SKIN_DATA"}),y=(t,e)=>t.store.dispatch({butterchurn:e,type:"GOT_BUTTERCHURN"}),b=(t,e)=>t.store.dispatch({presets:e,type:"GOT_BUTTERCHURN_PRESETS"}),x=t=>{let{presetHistory:e=[],presets:i=[]}=t.store.getState()?.milkdrop||{},r=Math.floor(Math.random()*i.length),a=i[r];return!a.name||n.has(a.name)||e.slice(-5).includes(r)?x(t):r},T=t=>{let e=x(t);t.store.dispatch({addToHistory:!0,index:e,type:"PRESET_REQUESTED"}),t.store.dispatch({index:e,type:"SELECT_PRESET_AT_INDEX"})},S=0,E=t=>{window.clearInterval(S),S=window.setInterval(()=>{t||window.clearInterval(S),T(t)},2e4)},_=t=>{let e=t.store.subscribe(()=>{let{milkdrop:r,windows:a}=t.store.getState();a?.genWindows?.milkdrop?.open&&!r?.butterchurn&&(0,o.aY)(["/Apps/Webamp/butterchurn.min.js"]).then(()=>{if(!window.butterchurn?.default)return;y(t,window.butterchurn.default);let{playlist:r,main:o}=a.genWindows||{},{x:n=0,y:s=0}=(r?.open?r?.position:o?.position)||{};t.store.dispatch({positions:{milkdrop:{x:n,y:s+d.height}},type:"UPDATE_WINDOW_POSITIONS"}),e(),t.store.subscribe(()=>{let t=[...document.body.children].find(t=>t.classList?.contains("webamp-desktop"));if(t){let e=document.querySelector("main");e&&([...e.children].forEach(t=>{t.classList?.contains("webamp-desktop")&&t.remove()}),e.append(t))}}),i.e(6938).then(i.t.bind(i,38574,23)).then(({default:e})=>{b(t,Object.entries(e).map(([t,e])=>({name:t,preset:e}))),T(t),E(t)})})})},k=()=>document.querySelector("#webamp"),M=(t,e)=>{let{height:i,width:a}=d,{x:o,y:n}=e||(0,r.r_)({height:2*i,width:a});t.store.dispatch({positions:{main:{x:o,y:n},milkdrop:{x:0-a,y:0-i},playlist:{x:o,y:i+n}},type:"UPDATE_WINDOW_POSITIONS"})},N=(t,e)=>t.store.dispatch({type:"SET_FOCUSED_WINDOW",window:e}),O=t=>t.store.dispatch({type:"SET_FOCUSED_WINDOW",window:""}),D=async(t,e)=>{let{parseBuffer:r}=await Promise.all([i.e(6327),i.e(6015)]).then(i.bind(i,76015)),{common:{album:n="",artist:s="",title:l=e},format:{duration:p=0}}=await r(t,{mimeType:a.fq,size:t.length},{duration:!0,skipCovers:!0,skipPostHeaders:!0});return{blob:(0,o.vJ)(t,"audio/mpeg"),duration:Math.floor(p),metaData:{album:n,artist:s,title:l}}},P=t=>{let e=t.map(t=>{let e=t.url?`
${t.url.toString()}`:"",i=t.defaultName;return t.metaData?.artist?t.metaData?.title?i=`${t.metaData.artist} - ${t.metaData.title}`:i&&(i=`${t.metaData.artist} - ${i}`):t.metaData?.title&&(i=t.metaData.title),e?`#EXTINF:${t.duration??-1},${i||""}${e}`:""});return`${["#EXTM3U",...e.filter(Boolean)].join("\n")}
`},L=async(t,e,r)=>{let{ASX:a,M3U:o,PLS:n}=await i.e(6372).then(i.t.bind(i,36372,23));return(({".asx":a,".m3u":o,".pls":n})[e]?.parse(t).filter(Boolean).slice(0,1e3)??[]).map(({artist:t="",file:e="",length:i=0,title:a=""})=>{let[o,n]=[t.trim(),a.trim()];return{duration:Math.max(i,0),metaData:{album:n||r,artist:o,title:n},url:e}})},R=(t="")=>t.replace(/<!\[CDATA\[|\]\]>/g,""),$={"somafm.com":t=>async()=>{let{pathname:e}=new URL(t),[i]=e.replace("/","").split("-"),r=await (await fetch(`https://somafm.com/songs/${i}.xml`,{cache:"no-cache",credentials:"omit",keepalive:!1,mode:"cors",referrerPolicy:"no-referrer",window:null})).text(),a=new DOMParser().parseFromString(r,"application/xml").querySelector("song"),o=a?.querySelector("artist")?.innerHTML,n=a?.querySelector("title")?.innerHTML;return{artist:R(o),title:R(n)}}},I=t=>{let{host:e}=new URL(t),[,i,r]=e.split(".");return $[`${i}.${r}`]?.(t)}},79808:(t,e,i)=>{i.d(e,{Ay:()=>s,EX:()=>a,Ho:()=>r,WB:()=>o,lH:()=>n});let r={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},a={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},o=30,n=166,s={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${o}px`,minWidth:`${n}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}}},36864:(t,e,i)=>{i.d(e,{Gn:()=>n,Ve:()=>p,WZ:()=>h,Xc:()=>l,r_:()=>s});var r=i(79808),a=i(48060),o=i(37e3);let n=(t,e,i=[],r=0)=>{let[n]=t.split(a.QB),s=`${n}${a.QB}`,l=i.find(t=>t.startsWith(s))||"",{componentWindow:p}=e?.[l]||{},{x:h=0,y:d=0,width:u=0,height:m=0}=p?.getBoundingClientRect()||{};return!(h+r+u>(0,o.e8)()||d+r+m>(0,o.Bv)())&&(h||d)?{x:h+r,y:d+r}:void 0},s=({height:t,width:e})=>{let[i,r]=[(0,o.Bv)(),(0,o.e8)()];return{x:Math.floor(r/2-(0,o.kl)(e)/2),y:Math.floor((i-a.D5)/2-(0,o.kl)(t)/2)}},l={BOTTOM:15,LEFT:150,RIGHT:50,TOP:0},p=(t,e,i=!1)=>{let{position:r,size:a}=t||{},{x:n=0,y:s=0}=r||{},{height:p=0,width:h=0}=a||{};return i?n+l.RIGHT>e.x||n+(0,o.kl)(h)-l.LEFT<0||s+l.BOTTOM>e.y||s+l.TOP<0:n<0||s<0||n+(0,o.kl)(h)>e.x||s+(0,o.kl)(p)>e.y},h=(t,e)=>{let i=Number(t.height-50),n=Number(t.width),[s,l]=[(0,o.Bv)(),(0,o.e8)()],p=s-a.D5-15,h=Math.max(r.WB,Math.min(i,p)),d=Math.max(r.lH,Math.min(n,l));if(!e)return{height:h,width:d};let u=i===h,m=n===d;return u||m?u?m?{height:h,width:d}:{height:Math.round(h/(n/d)),width:d}:{height:h,width:Math.round(d/(i/h))}:i>n?{height:h,width:Math.round(d/(p/h))}:{height:Math.round(h/(l/d)),width:d}}}}]);