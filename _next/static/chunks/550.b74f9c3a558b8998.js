"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550,1583],{60550:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var i=a(74848),r=a(33540);let s=r.default.div`
  align-items: center;
  background-color: #000;
  display: flex;
  height: 100%;
  width: 100%;

  canvas {
    /* stylelint-disable declaration-block-no-duplicate-properties */
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    position: absolute;
    top: 0 !important;
    touch-action: none;
    -webkit-touch-callout: none;
    user-select: none;
    width: 100%;
  }

  div,
  video {
    display: none;
  }

  .emulator-mouse-overlay {
    display: block;
    inset: 0;
    position: absolute;
  }
`;var n=a(96540);let o={emulatorFunction:"dosWorker"},l=["__core-js_shared__","compiled","core","emulatorsUi","exports","WDOSBOX","worker"],d=".zip.save",c={".jsdos/dosbox.conf":"/Apps/js-dos/dosbox.conf",".jsdos/jsdos.json":"/Apps/js-dos/jsdos.json"},u=new Set(["Alt","ContextMenu","F1","F3","F5","F6","F7","F10","F11","F12"]);var h=a(16286),w=a(55650),p=a(41017),f=a(62104),b=a(48060),m=a(37e3),g=a(81005),x=a(48287).Buffer;let y=async(e,t)=>{let{addFileToZip:i,isFileInZip:r}=await a.e(6789).then(a.bind(a,16789));return Object.entries(c).reduce(async(e,[a,s])=>{let n=await e;return n.length>0&&await r(n,a)?n:i(n,s,a,t)},Promise.resolve(e))},v=(e,t,i,r)=>{let{appendFileToTitle:s}=(0,w.A)(e),{exists:o,mkdirRecursive:c,readFile:u,updateFolder:v,writeFile:k}=(0,p.f)(),{linkElement:j,processes:{[e]:E}}=(0,f.N)(),{closing:$}=E||{},[S,A]=(0,n.useState)({}),T=(0,n.useCallback)(async(e,t,a=!1)=>{let i=`${(0,h.basename)(e)}${d}`;await o(b.Sb)||(await c(b.Sb),v((0,h.dirname)(b.Sb)));let s=(0,h.join)(b.Sb,i);if(void 0!==S[e]&&await k(s,x.from(await S[e].persist()||[]),!0)){if(t){let e=(0,h.join)(b.jv,b.Sb),a=(0,h.join)(b.jv,`${s}${b.V9}`);await o(e)||(await c(e),v((0,h.dirname)(b.Sb))),await k(a,t,!0)}v(b.Sb,i)}if(a)try{await r?.stop(),await S[e]?.exit()}catch{}},[S,r,o,c,v,k]),G=(0,n.useCallback)(async()=>{let n;let[c]=Object.keys(S);"string"==typeof c&&(await T(c),A({[t]:void 0}));let w=t?await u(t):x.from(""),p=(0,m.uQ)(t),{zipAsync:f}=await a.e(6789).then(a.bind(a,16789)),v=async e=>x.from(await f({[(0,h.basename)(t)]:e})),k=async e=>(0,m.Zd)(await y(e,u)),E=".exe"===p?await v(w):w;if(".jsdos"===p)n=(0,m.Zd)(E);else try{n=await k(E)}catch{n=await k(await v(w))}let $=(0,h.join)(b.Sb,`${(0,h.basename)(t)}${d}`),G=await o($)?(0,m.Zd)(await u($)):void 0,L=await r?.run(n,G);if(L){let a=i.current?.querySelector("canvas");a instanceof HTMLCanvasElement&&(j(e,"peekElement",a),A({[t]:L}),s((0,h.basename)(t)),(0,m.E)(n),G&&(0,m.E)(G),(0,g.v)(l))}},[s,T,i,S,r,o,e,j,u,t]);return(0,n.useEffect)(()=>(!E||$||!r||t in S||G(),()=>{if($){if(t){let e=e=>{window.setTimeout(()=>T(t,e,$),b.UW.WINDOW)};(async()=>{let e=await S[t]?.screenshot();return e?(0,m.Jf)(e):void 0})().then(e).catch(e)}else r?.stop()}}),[T,$,S,r,G,E,t]),S[t]};var k=a(16602),j=a(85531),E=a(1364);let $=e=>{u.has(e.key)&&e.preventDefault()},S=({containerRef:e,id:t,loading:a,setLoading:i,url:r})=>{let{updateWindowSize:s}=(0,j.A)(t),[l,d]=(0,n.useState)(),c=(0,k.A)(),u=(0,n.useRef)(!1),{foregroundId:h}=(0,E.w)(),w=v(t,r,e,l),{closeWithTransition:p,processes:{[t]:{libs:g=[]}={}}={}}=(0,f.N)();(0,n.useEffect)(()=>{l||u.current||(u.current=!0,(0,m.aY)(g).then(()=>{if(window.emulators&&(window.emulators.pathPrefix="/Apps/js-dos/",e.current)){let t=e.current.closest("section");t?.addEventListener("keydown",$,{capture:!0}),t?.addEventListener("keyup",$,{capture:!0}),t?.addEventListener("focus",()=>e.current?.focus(b.VD),{passive:!0}),d(window.Dos(e.current,o))}}))},[e,l,g]),(0,n.useEffect)(()=>{if(w&&a){s(w.height(),w.width());let a=w.events();a.onMessage((e,a)=>{if(a.startsWith("[LOG_EXEC]")){let[,e]=a.split("[LOG_EXEC]"),[i]=e.replace("Parsing command line: ","").split(" ");"EXIT"===i.toUpperCase()&&p(t)}}),a.onFrameSize(()=>{let t=e.current?.querySelector("canvas"),[a,i]=[(0,m.kl)(t?.style.width),(0,m.kl)(t?.style.height)],{height:r=0,width:n=0}=t?.getBoundingClientRect()||{};i&&a&&(i!==r||a!==n)&&s(i,a)}),a.onExit(()=>window.SimpleKeyboardInstances?.emulatorKeyboard?.destroy()),i(!1),c(window.JSDOS_FS,"JS-DOS")}},[p,e,w,l?.layers,t,a,c,i,s]),(0,n.useLayoutEffect)(()=>{t!==h||a||e.current?.focus(b.VD)},[e,a,h,t])};var A=a(14153);let T=({id:e})=>(0,i.jsx)(A.A,{StyledComponent:s,id:e,useHook:S})},14153:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(74848),r=a(96540),s=a(51583),n=a(8218),o=a(62104);let l=(0,r.memo)(({id:e,useHook:t,StyledComponent:a,children:l})=>{let{processes:{[e]:{url:d=""}={}}}=(0,o.N)(),c=(0,r.useRef)(null),[u,h]=(0,r.useState)(!0),w=(0,r.useMemo)(()=>({contain:"strict",visibility:u?"hidden":"visible"}),[u]);return t({containerRef:c,id:e,loading:u,setLoading:h,url:d}),(0,i.jsxs)(i.Fragment,{children:[u&&(0,i.jsx)(s.default,{}),(0,i.jsx)(a,{ref:c,style:w,...(0,n.A)({id:e}),children:l})]})})},51583:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var i=a(33540);let r=i.default.div`
  cursor: wait;
  height: 100%;
  width: 100%;

  &::before {
    color: #fff;
    content: "L o a d i n g ...";
    display: flex;
    font-size: 12px;
    justify-content: center;
    mix-blend-mode: difference;
    padding-top: 18px;
  }
`},16602:(e,t,a)=>{a.d(t,{A:()=>s});var i=a(96540),r=a(41017);let s=()=>{let{mountEmscriptenFs:e,unMapFs:t,updateFolder:a}=(0,r.f)(),s=(0,i.useRef)();return(0,i.useEffect)(()=>()=>{if(s.current){let e=s.current;s.current="",t(e,!0).then(()=>a("/",void 0,e)).catch(()=>{})}},[t,a]),(0,i.useCallback)(async(t,i)=>{if(!t)return;let r="";try{r=await e(t,i)}catch{}r&&(a("/",r),s.current=r)},[e,a])}},8218:(e,t,a)=>{a.d(t,{A:()=>p});var i=a(16286),r=a(96540),s=a(51780),n=a(16091),o=a(13296),l=a(41017),d=a(62104),c=a(1364),u=a(48060),h=a(37e3),w=a(96119);let p=({callback:e,directory:t=u.Bn,id:a,onDragLeave:p,onDragOver:f,updatePositions:b})=>{let{url:m}=(0,d.N)(),g=(0,w.w)(),{iconPositions:x,sortOrders:y,setIconPositions:v}=(0,c.w)(),{exists:k,mkdirRecursive:j,updateFolder:E,writeFile:$}=(0,l.f)(),S=(0,r.useCallback)(async(e,t,r)=>{if(a){if(t){let s=(0,i.join)(u.Bn,e);if(await j(u.Bn),await $(s,t,!0))return r===o.z.UPDATE_URL&&m(a,s),E(u.Bn,e),(0,i.basename)(s)}else r===o.z.UPDATE_URL&&m(a,e)}return""},[a,j,E,m,$]),{openTransferDialog:A}=(0,s.A)();return{onDragLeave:p,onDragOver:e=>{f?.(e),(0,h.CH)(e)},onDrop:r=>{if(u.jj.has((0,h.uQ)(t)))return;if(b&&r.target instanceof HTMLElement){let{files:e,text:a}=(0,n.bn)(r);if(0===e.length&&""===a)return;(async()=>{let s={x:r.clientX,y:r.clientY},n=[];if(a){try{n=JSON.parse(a)}catch{}if(!Array.isArray(n))return;let[e]=n;if(!e||e.startsWith(t)&&(0,i.basename)(e)===(0,i.relative)(t,e))return;n=n.map(e=>(0,i.basename)(e))}else e instanceof FileList?n=[...e].map(e=>e.name):n=[...e].map(e=>e.getAsFile()?.name||"").filter(Boolean);n=await Promise.all(n.map(async e=>{let a=`${t}/${e}`;if(!x[a]||!await k(a))return e;let r=0;do r+=1,a=`${t}/${(0,i.basename)(e,(0,i.extname)(e))} (${r})${(0,i.extname)(e)}`;while(x[a]&&await k(a));return(0,i.basename)(a)})),(0,h.$Y)(t,r.target,x,y,s,n,v,k)})()}let s="string"==typeof a;s&&!b&&t===u.Bn&&g.current[a]?.componentWindow?.focus(u.VD),(0,n.nX)(r,e||S,t,A,s)}}}},79808:(e,t,a)=>{a.d(t,{Ay:()=>o,EX:()=>r,Ho:()=>i,WB:()=>s,lH:()=>n});let i={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},r={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},s=30,n=166,o={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${s}px`,minWidth:`${n}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}}},36864:(e,t,a)=>{a.d(t,{Gn:()=>n,Ve:()=>d,WZ:()=>c,Xc:()=>l,r_:()=>o});var i=a(79808),r=a(48060),s=a(37e3);let n=(e,t,a=[],i=0)=>{let[n]=e.split(r.QB),o=`${n}${r.QB}`,l=a.find(e=>e.startsWith(o))||"",{componentWindow:d}=t?.[l]||{},{x:c=0,y:u=0,width:h=0,height:w=0}=d?.getBoundingClientRect()||{};return!(c+i+h>(0,s.e8)()||u+i+w>(0,s.Bv)())&&(c||u)?{x:c+i,y:u+i}:void 0},o=({height:e,width:t})=>{let[a,i]=[(0,s.Bv)(),(0,s.e8)()];return{x:Math.floor(i/2-(0,s.kl)(t)/2),y:Math.floor((a-r.D5)/2-(0,s.kl)(e)/2)}},l={BOTTOM:15,LEFT:150,RIGHT:50,TOP:0},d=(e,t,a=!1)=>{let{position:i,size:r}=e||{},{x:n=0,y:o=0}=i||{},{height:d=0,width:c=0}=r||{};return a?n+l.RIGHT>t.x||n+(0,s.kl)(c)-l.LEFT<0||o+l.BOTTOM>t.y||o+l.TOP<0:n<0||o<0||n+(0,s.kl)(c)>t.x||o+(0,s.kl)(d)>t.y},c=(e,t)=>{let a=Number(e.height-50),n=Number(e.width),[o,l]=[(0,s.Bv)(),(0,s.e8)()],d=o-r.D5-15,c=Math.max(i.WB,Math.min(a,d)),u=Math.max(i.lH,Math.min(n,l));if(!t)return{height:c,width:u};let h=a===c,w=n===u;return h||w?h?w?{height:c,width:u}:{height:Math.round(c/(n/u)),width:u}:{height:c,width:Math.round(u/(a/c))}:a>n?{height:c,width:Math.round(u/(d/c))}:{height:Math.round(c/(l/u)),width:u}}},55650:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(96540),r=a(62104),s=a(25573),n=a(48060);let o=e=>{let{title:t}=(0,r.N)(),[a]=e.split(n.QB),{title:o}=s.A[a]||{};return{appendFileToTitle:(0,i.useCallback)((a,i)=>{let r=a?` - ${a}${i?` ${n.g6}`:""}`:"";t(e,`${o}${r}`)},[e,o,t]),prependFileToTitle:(0,i.useCallback)((a,i,r)=>{let s=a?`${i?`${n.g6} `:""}${a}${r?" ":" - "}`:"";t(e,`${s}${o}`)},[e,o,t])}}},85531:(e,t,a)=>{a.d(t,{A:()=>l});var i=a(33540),r=a(96540),s=a(36864),n=a(62104),o=a(1364);let l=e=>{let{setWindowStates:t}=(0,o.w)(),{processes:{[e]:{lockAspectRatio:a=!0,maximized:l=!1}={}}={}}=(0,n.N)(),{sizes:{titleBar:d}}=(0,i.useTheme)();return{updateWindowSize:(0,r.useCallback)((i,r)=>t(t=>({...t,[e]:{...t?.[e],maximized:l,size:(0,s.WZ)({height:i+d.height,width:r},a)}})),[e,a,l,t,d.height])}}},81005:(e,t,a)=>{a.d(t,{$:()=>n,v:()=>s});let i="DEFAULT",r="__setter__",s=e=>e.forEach(e=>{if(e in window)try{delete window[e]}finally{Object.assign(window,{[e]:void 0})}}),n=(e,t,a)=>{if(setTimeout(()=>{window.sharedGlobals&&e in window.sharedGlobals&&(window.sharedGlobals[e][r]=i)},a),window.sharedGlobals=window.sharedGlobals||{},e in window.sharedGlobals)window.sharedGlobals[e][r]=t;else{let a=window[e];window.sharedGlobals[e]={[i]:a,[r]:t},Object.defineProperty(window,e,{get(){if(window.sharedGlobals&&e in window.sharedGlobals){let{stack:t=""}=Error(),a=Object.keys(window.sharedGlobals[e]).filter(e=>![i,r].includes(e)).find(e=>new RegExp(e).test(t));return window.sharedGlobals[e][a||i]}return a},set(t){window.sharedGlobals&&e in window.sharedGlobals&&(window.sharedGlobals[e][window.sharedGlobals[e][r]]=t)}})}}}}]);